{"version":3,"sources":["index.tsx"],"names":["React","useState","Cart","CartController","useOrder","useLanguage","useUtils","useValidationFields","CContainer","CheckoutAction","OSBill","OSTable","OSCoupon","OSTotal","ProductItemAccordion","BusinessItemAccordion","CouponControl","OButton","OModal","OText","colors","ProductForm","UpsellingProducts","CartUI","props","cart","clearCart","changeQuantity","getProductMax","offsetDisabled","removeProduct","handleCartOpen","t","orderState","parsePrice","parseNumber","parseDate","validationFields","confirm","setConfirm","open","content","handleOnAccept","openProduct","setModalIsOpen","curProduct","setCurProduct","openUpselling","setOpenUpselling","canOpenUpselling","setCanOpenUpselling","isCartsLoading","setIsCartsLoading","isCartPending","status","isCouponEnabled","fields","checkout","coupon","enabled","momentFormatted","option","moment","outputFormat","handleDeleteClick","product","handleEditProduct","handlerProductAction","Object","keys","length","handleClearProducts","result","uuid","error","handleUpsellingPage","onNavigationRedirect","cartUuid","products","map","code","valid_products","subtotal","business","tax_type","tax","options","type","delivery_price","driver_tip","driver_tip_rate","service_fee","discount","total","discount_type","discount_rate","business_id","marginTop","fontWeight","primary","minimum","valid_address","secundary","color","textAlign","flex","width","flexDirection","justifyContent","slug","category_id","id","cartProps","UIComponent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Cart as CartController,\r\n  useOrder,\r\n  useLanguage,\r\n  useEvent,\r\n  useUtils,\r\n  useValidationFields,\r\n} from 'ordering-components/native';\r\n\r\nimport {\r\n  CContainer,\r\n  OrderBill,\r\n  CheckoutAction,\r\n  CouponContainer\r\n} from './styles';\r\n\r\nimport { OSBill, OSTable, OSCoupon, OSTotal } from '../OrderSummary/styles';\r\n\r\nimport { ProductItemAccordion } from '../ProductItemAccordion';\r\nimport { BusinessItemAccordion } from '../BusinessItemAccordion';\r\nimport { CouponControl } from '../CouponControl';\r\n\r\n// import { ProductForm } from '../ProductForm';\r\n\r\nimport { OButton, OModal, OText, OBottomPopup } from '../shared';\r\nimport { colors } from '../../theme';\r\nimport { ProductForm } from '../ProductForm';\r\nimport { UpsellingProducts } from '../UpsellingProducts';\r\n\r\nconst CartUI = (props: any) => {\r\n  const {\r\n    cart,\r\n    clearCart,\r\n    changeQuantity,\r\n    getProductMax,\r\n    offsetDisabled,\r\n    removeProduct,\r\n    handleCartOpen\r\n  } = props\r\n\r\n  const [, t] = useLanguage()\r\n  const [orderState] = useOrder()\r\n  // const [events] = useEvent()\r\n  const [{ parsePrice, parseNumber, parseDate }] = useUtils()\r\n  const [validationFields] = useValidationFields()\r\n\r\n  const [confirm, setConfirm] = useState<any>({ open: false, content: null, handleOnAccept: null })\r\n  const [openProduct, setModalIsOpen] = useState(false)\r\n  const [curProduct, setCurProduct] = useState<any>(null)\r\n  const [openUpselling, setOpenUpselling] = useState(false)\r\n  const [canOpenUpselling, setCanOpenUpselling] = useState(false)\r\n\r\n  const [isCartsLoading, setIsCartsLoading] = useState(false)\r\n\r\n  const isCartPending = cart?.status === 2\r\n  const isCouponEnabled = validationFields?.fields?.checkout?.coupon?.enabled\r\n\r\n  const momentFormatted = !orderState?.option?.moment\r\n    ? t('RIGHT_NOW', 'Right Now')\r\n    : parseDate(orderState?.option?.moment, { outputFormat: 'YYYY-MM-DD HH:mm' })\r\n\r\n  const handleDeleteClick = (product: any) => {\r\n    removeProduct(product)\r\n  }\r\n\r\n  const handleEditProduct = (product: any) => {\r\n    setCurProduct(product)\r\n    setModalIsOpen(true)\r\n  }\r\n\r\n  const handlerProductAction = (product: any) => {\r\n    if (Object.keys(product).length) {\r\n      setModalIsOpen(false)\r\n    }\r\n  }\r\n\r\n  const handleClearProducts = async () => {\r\n    try {\r\n      setIsCartsLoading(true)\r\n      const result = await clearCart(cart?.uuid)\r\n      setIsCartsLoading(false)\r\n    } catch (error) {\r\n      setIsCartsLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleUpsellingPage = () => {\r\n    setOpenUpselling(false)\r\n    setCanOpenUpselling(false)\r\n    props.onNavigationRedirect('CheckoutNavigator', { cartUuid: cart?.uuid })\r\n  }\r\n\r\n  return (\r\n    <CContainer>\r\n      <BusinessItemAccordion\r\n        cart={cart}\r\n        moment={momentFormatted}\r\n        isCartsLoading={isCartsLoading}\r\n        handleClearProducts={handleClearProducts}\r\n        handleCartOpen={handleCartOpen}\r\n        onNavigationRedirect={props.onNavigationRedirect}\r\n      >\r\n        {cart?.products?.length > 0 && cart?.products.map((product: any) => (\r\n          <ProductItemAccordion\r\n            key={product.code}\r\n            isCartPending={isCartPending}\r\n            isCartProduct\r\n            product={product}\r\n            changeQuantity={changeQuantity}\r\n            getProductMax={getProductMax}\r\n            offsetDisabled={offsetDisabled}\r\n            onDeleteProduct={handleDeleteClick}\r\n            onEditProduct={handleEditProduct}\r\n          />\r\n        ))}\r\n\r\n        {cart?.valid_products && (\r\n          <OSBill>\r\n            <OSTable>\r\n              <OText>{t('SUBTOTAL', 'Subtotal')}</OText>\r\n              <OText>{parsePrice(cart?.subtotal || 0)}</OText>\r\n            </OSTable>\r\n            <OSTable>\r\n              <OText>\r\n                {\r\n                  cart.business.tax_type === 1\r\n                    ? t('TAX_INCLUDED', 'Tax (included)')\r\n                    : t('TAX', 'Tax')\r\n                }\r\n                {`(${parseNumber(cart?.business?.tax)}%)`}\r\n              </OText>\r\n              <OText>{parsePrice(cart?.tax || 0)}</OText>\r\n            </OSTable>\r\n            {orderState?.options?.type === 1 && cart?.delivery_price > 0 && (\r\n              <OSTable>\r\n                <OText>{t('DELIVERY_FEE', 'Delivery Fee')}</OText>\r\n                <OText>{parsePrice(cart?.delivery_price)}</OText>\r\n              </OSTable>\r\n            )}\r\n            {cart?.driver_tip > 0 && (\r\n              <OSTable>\r\n                <OText>\r\n                  {t('DRIVER_TIP', 'Driver tip')}\r\n                  {(cart?.driver_tip_rate > 0) && (\r\n                    `(${parseNumber(cart?.driver_tip_rate)}%)`\r\n                  )}\r\n                </OText>\r\n                <OText>{parsePrice(cart?.driver_tip)}</OText>\r\n              </OSTable>\r\n            )}\r\n            {cart?.service_fee > 0 && (\r\n              <OSTable>\r\n                <OText>\r\n                  {t('SERVICE_FEE', 'Service Fee')}\r\n                  {`(${parseNumber(cart?.business?.service_fee)}%)`}\r\n                </OText>\r\n                <OText>{parsePrice(cart?.service_fee)}</OText>\r\n              </OSTable>\r\n            )}\r\n            {cart?.discount > 0 && cart?.total >= 0 && (\r\n              <OSTable>\r\n                {cart?.discount_type === 1 ? (\r\n                  <OText>\r\n                    {t('DISCOUNT', 'Discount')}\r\n                    <OText>{`(${parseNumber(cart?.discount_rate)}%)`}</OText>\r\n                  </OText>\r\n                ) : (\r\n                  <OText>{t('DISCOUNT', 'Discount')}</OText>\r\n                )}\r\n                <OText>- {parsePrice(cart?.discount || 0)}</OText>\r\n              </OSTable>\r\n            )}\r\n            {isCouponEnabled && !isCartPending && (\r\n              <OSTable>\r\n                <OSCoupon>\r\n                  <CouponControl\r\n                    businessId={cart.business_id}\r\n                    price={cart.total}\r\n                  />\r\n                </OSCoupon>\r\n              </OSTable>\r\n            )}\r\n            <OSTotal>\r\n              <OSTable style={{ marginTop: 15 }}>\r\n                <OText style={{ fontWeight: 'bold' }}>\r\n                  {t('TOTAL', 'Total')}\r\n                </OText>\r\n                <OText style={{ fontWeight: 'bold' }} color={colors.primary}>\r\n                  {cart?.total >= 1 && parsePrice(cart?.total)}\r\n                </OText>\r\n              </OSTable>\r\n            </OSTotal>\r\n          </OSBill>\r\n        )}\r\n        <CheckoutAction>\r\n          <OButton\r\n            text={(cart?.subtotal >= cart?.minimum || !cart?.minimum) && cart?.valid_address ? (\r\n              !openUpselling !== canOpenUpselling ? t('CHECKOUT', 'Checkout') : t('LOADING', 'Loading')\r\n            ) : !cart?.valid_address ? (\r\n              `${t('OUT_OF_COVERAGE', 'Out of Coverage')}`\r\n            ) : (\r\n              `${t('MINIMUN_SUBTOTAL_ORDER', 'Minimum subtotal order:')} ${parsePrice(cart?.minimum)}`\r\n            )}\r\n            bgColor={(cart?.subtotal < cart?.minimum || !cart?.valid_address) ? colors.secundary : colors.primary}\r\n            isDisabled={(openUpselling && !canOpenUpselling) || cart?.subtotal < cart?.minimum || !cart?.valid_address}\r\n            borderColor={colors.primary}\r\n            imgRightSrc={null}\r\n            textStyle={{ color: 'white', textAlign: 'center', flex: 1 }}\r\n            onClick={() => setOpenUpselling(true)}\r\n            style={{width: '100%', flexDirection: 'row', justifyContent: 'center'}}\r\n          />\r\n        </CheckoutAction>\r\n      </BusinessItemAccordion>\r\n      <OModal\r\n        open={openProduct}\r\n        entireModal\r\n        customClose\r\n        onClose={() => setModalIsOpen(false)}\r\n      >\r\n        <ProductForm\r\n          isCartProduct\r\n          productCart={curProduct}\r\n          businessSlug={cart?.business?.slug}\r\n          businessId={curProduct?.business_id}\r\n          categoryId={curProduct?.category_id}\r\n          productId={curProduct?.id}\r\n          onSave={handlerProductAction}\r\n          onClose={() => setModalIsOpen(false)}\r\n        />\r\n\r\n      </OModal>\r\n\r\n      {openUpselling && (\r\n        <UpsellingProducts\r\n          handleUpsellingPage={handleUpsellingPage}\r\n          openUpselling={openUpselling}\r\n          businessId={cart?.business_id}\r\n          business={cart?.business}\r\n          cartProducts={cart?.products}\r\n          canOpenUpselling={canOpenUpselling}\r\n          setCanOpenUpselling={setCanOpenUpselling}\r\n        />\r\n      )}\r\n    </CContainer>\r\n  )\r\n}\r\n\r\nexport const Cart = (props: any) => {\r\n  const cartProps = {\r\n    ...props,\r\n    UIComponent: CartUI\r\n  }\r\n\r\n  return (\r\n    <CartController {...cartProps} />\r\n  )\r\n}\r\n"]}