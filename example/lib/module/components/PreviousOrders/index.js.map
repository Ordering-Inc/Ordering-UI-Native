{"version":3,"sources":["index.tsx"],"names":["React","useLanguage","useUtils","StyleSheet","TouchableOpacity","OButton","OIcon","OText","Card","Logo","Information","MyOrderOptions","Status","WrappButton","colors","ScrollView","Spinner","PreviousOrders","props","orders","pagination","onNavigationRedirect","loadMoreOrders","getOrderStatus","handleReorder","reorderLoading","orderID","t","parseDate","allowedOrderStatus","handleClickViewOrder","uuid","orderId","handleClickOrderReview","order","id","business_id","logo","business","height","marginBottom","map","styles","name","textSecondary","delivery_datetime_utc","delivery_datetime","utc","primary","includes","parseInt","status","review","value","buttonText","reorderbutton","totalPages","currentPage","color","white","create","borderRadius","width","paddingLeft","paddingRight","flex","fontSize","marginLeft","marginRight"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { useLanguage, useUtils } from 'ordering-components/native'\r\nimport { FlatList, StyleSheet, TouchableOpacity } from 'react-native'\r\nimport { OButton, OIcon, OText } from '../shared'\r\nimport { Card, Logo, Information, MyOrderOptions, Status, WrappButton } from './styles'\r\nimport { colors } from '../../theme'\r\nimport { PreviousOrdersParams } from '../../types'\r\nimport { ReviewOrder } from '../ReviewOrder'\r\nimport { ScrollView } from 'react-native-gesture-handler'\r\nimport Spinner from 'react-native-loading-spinner-overlay'\r\n\r\nexport const PreviousOrders = (props: PreviousOrdersParams) => {\r\n  const {\r\n    orders,\r\n    pagination,\r\n    onNavigationRedirect,\r\n    loadMoreOrders,\r\n    getOrderStatus,\r\n    handleReorder,\r\n    reorderLoading,\r\n    orderID\r\n  } = props\r\n\r\n  const [, t] = useLanguage()\r\n  const [{ parseDate }] = useUtils()\r\n  const allowedOrderStatus = [1, 2, 5, 6, 10, 11, 12]\r\n\r\n  const handleClickViewOrder = (uuid: string) => {\r\n    onNavigationRedirect && onNavigationRedirect('OrderDetails', { orderId: uuid })\r\n  }\r\n\r\n  const handleClickOrderReview = (order: any) => {\r\n    onNavigationRedirect && onNavigationRedirect('ReviewOrder', { order: { id: order?.id, business_id: order?.business_id, logo: order.business?.logo } })\r\n  }\r\n  return (\r\n\r\n    <ScrollView\r\n      style={{ height: '60%', marginBottom: 30 }}\r\n    >\r\n      <Spinner visible={reorderLoading} />\r\n      {orders.map((order: any) => (\r\n        <Card key={order.id}>\r\n          {order.business?.logo && (\r\n            <Logo>\r\n              <OIcon url={order.business?.logo} style={styles.logo} />\r\n            </Logo>\r\n          )}\r\n          <Information>\r\n            <OText size={16} numberOfLines={1}>\r\n              {order.business?.name}\r\n            </OText>\r\n            <OText size={12} color={colors.textSecondary} numberOfLines={1}>\r\n              {order?.delivery_datetime_utc ? parseDate(order?.delivery_datetime_utc) : parseDate(order?.delivery_datetime, { utc: false })}\r\n            </OText>\r\n            <MyOrderOptions>\r\n              <TouchableOpacity onPress={() => handleClickViewOrder(order?.uuid)}>\r\n                <OText size={10} color={colors.primary} mRight={5} numberOfLines={1}>{t('MOBILE_FRONT_BUTTON_VIEW_ORDER', 'View order')}</OText>\r\n              </TouchableOpacity>\r\n              {\r\n                allowedOrderStatus.includes(parseInt(order?.status)) && !order.review && (\r\n                  <TouchableOpacity onPress={() => handleClickOrderReview(order)}>\r\n                    <OText size={10} color={colors.primary} numberOfLines={1}>{t('REVIEW_ORDER', 'Review Order')}</OText>\r\n                  </TouchableOpacity>\r\n                )}\r\n            </MyOrderOptions>\r\n          </Information>\r\n          <Status>\r\n            <OText\r\n              color={colors.primary}\r\n              size={16}\r\n              numberOfLines={1}\r\n            >\r\n              {getOrderStatus(order.status)?.value}\r\n            </OText>\r\n            <OButton\r\n              text={t('REORDER', 'Reorder')}\r\n              imgRightSrc={''}\r\n              textStyle={styles.buttonText}\r\n              style={styles.reorderbutton}\r\n              onClick={() => handleReorder(order.id)}\r\n            />\r\n          </Status>\r\n\r\n        </Card>\r\n      ))}\r\n      {pagination.totalPages && pagination.currentPage < pagination.totalPages && (\r\n        <WrappButton>\r\n          <OButton\r\n            onClick={loadMoreOrders}\r\n            text={t('LOAD_MORE_ORDERS', 'Load more orders')}\r\n            imgRightSrc={null}\r\n            textStyle={{color: colors.white}}\r\n          />\r\n        </WrappButton>\r\n      )}\r\n    </ScrollView>\r\n\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  logo: {\r\n    borderRadius: 10,\r\n    width: 75,\r\n    height: 75\r\n  },\r\n  reorderbutton: {\r\n    width: 80,\r\n    height: 40,\r\n    paddingLeft: 0,\r\n    paddingRight: 0,\r\n    borderRadius: 10,\r\n    flex: 1\r\n  },\r\n  buttonText: {\r\n    color: colors.white,\r\n    fontSize: 12,\r\n    marginLeft: 2,\r\n    marginRight: 2\r\n  }\r\n})\r\n"]}