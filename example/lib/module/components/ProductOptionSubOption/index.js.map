{"version":3,"sources":["index.tsx"],"names":["React","useState","useEffect","ProductOptionSuboption","ProductSubOptionController","useUtils","useLanguage","StyleSheet","MaterialCommunityIcon","Container","IconControl","QuantityControl","Checkbox","PositionControl","Circle","colors","OText","ProductOptionSubOptionUI","props","state","increment","decrement","balance","option","suboption","toggleSelect","changePosition","disabled","t","parsePrice","showMessage","setShowMessage","handleIncrement","handleDecrement","handlePosition","position","handleSuboptionClick","max","suboptions","length","min","disableIncrement","limit_suboptions_by_max","quantity","selected","price","with_half_option","half_price","primary","backgroundDark","flex","name","textAlign","allow_suboption_quantity","styles","inverse","create","transform","rotateY","ProductOptionSubOption","productOptionSubOptionProps","UIComponent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport {\r\n  ProductOptionSuboption as ProductSubOptionController,\r\n  useUtils,\r\n  useLanguage\r\n} from 'ordering-components/native'\r\nimport { StyleSheet } from 'react-native'\r\nimport MaterialCommunityIcon from 'react-native-vector-icons/MaterialCommunityIcons'\r\n\r\nimport {\r\n  Container,\r\n  IconControl,\r\n  QuantityControl,\r\n  Checkbox,\r\n  PositionControl,\r\n  Circle\r\n} from './styles'\r\nimport { colors } from '../../theme'\r\nimport { OText } from '../shared'\r\n\r\nexport const ProductOptionSubOptionUI = (props: any) => {\r\n  const {\r\n    state,\r\n    increment,\r\n    decrement,\r\n    balance,\r\n    option,\r\n    suboption,\r\n    toggleSelect,\r\n    changePosition,\r\n    disabled\r\n  } = props\r\n\r\n  const [, t] = useLanguage()\r\n  const [{ parsePrice }] = useUtils()\r\n  const [showMessage, setShowMessage] = useState(false)\r\n\r\n  const handleIncrement = () => {\r\n    increment()\r\n  }\r\n\r\n  const handleDecrement = () => {\r\n    decrement()\r\n  }\r\n\r\n  const handlePosition = (position: string) => {\r\n    changePosition(position)\r\n  }\r\n\r\n  const handleSuboptionClick = () => {\r\n    toggleSelect()\r\n    if (balance === option?.max && option?.suboptions?.length > balance && !(option?.min === 1 && option?.max === 1)) {\r\n      setShowMessage(true)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!(balance === option?.max && option?.suboptions?.length > balance && !(option?.min === 1 && option?.max === 1))) {\r\n      setShowMessage(false)\r\n    }\r\n  }, [balance])\r\n\r\n  const disableIncrement = option?.limit_suboptions_by_max ? balance === option?.max : state.quantity === suboption?.max || (!state.selected && balance === option?.max)\r\n  const price = option?.with_half_option && suboption?.half_price && state.position !== 'whole' ? suboption?.half_price : suboption?.price\r\n\r\n  return (\r\n    <Container onPress={() => handleSuboptionClick()} disabled={disabled}>\r\n      <IconControl>\r\n        {((option?.min === 0 && option?.max === 1) || option?.max > 1) ? (\r\n          state?.selected ? (\r\n            <MaterialCommunityIcon name='checkbox-marked' color={colors.primary} size={24} />\r\n          ) : (\r\n            <MaterialCommunityIcon name='checkbox-blank-outline' color={colors.backgroundDark} size={24} />\r\n          )\r\n        ) : (\r\n          state?.selected ? (\r\n            <MaterialCommunityIcon name='radiobox-marked' color={colors.primary} size={24} />\r\n          ) : (\r\n            <MaterialCommunityIcon name='radiobox-blank' color={colors.backgroundDark} size={24} />\r\n          )\r\n        )}\r\n        <OText mLeft={10} style={{ flex: 1 }}>\r\n          {suboption?.name}\r\n        </OText>\r\n      </IconControl>\r\n      {showMessage && <OText mLeft={10} mRight={10} style={{ flex: 1, textAlign: 'center' }} color={colors.primary}>{`${t('OPTIONS_MAX_LIMIT', 'Maximum options to choose')}: ${option?.max}`}</OText>}\r\n      {option?.allow_suboption_quantity && (\r\n        <QuantityControl>\r\n          <Checkbox disabled={state.quantity === 0} onPress={handleDecrement}>\r\n            <MaterialCommunityIcon\r\n              name='minus-circle-outline'\r\n              size={24}\r\n              color={state.quantity === 0 ? colors.backgroundDark : colors.primary}\r\n            />\r\n          </Checkbox>\r\n          <OText mLeft={5} mRight={5}>\r\n            {state.quantity}\r\n          </OText>\r\n          <Checkbox disabled={disableIncrement} onPress={handleIncrement}>\r\n            <MaterialCommunityIcon\r\n              name='plus-circle-outline'\r\n              size={24}\r\n              color={disableIncrement ? colors.backgroundDark : colors.primary}\r\n            />\r\n          </Checkbox>\r\n        </QuantityControl>\r\n      )}\r\n      {\r\n        option?.with_half_option && (\r\n          <PositionControl>\r\n            <Circle onPress={() => handlePosition('left')}>\r\n              <MaterialCommunityIcon\r\n                name='circle-half-full'\r\n                color={state.selected && state.position === 'left' ? colors.primary : colors.backgroundDark}\r\n                size={24}\r\n                style={styles.inverse}\r\n              />\r\n            </Circle>\r\n            <Circle onPress={() => handlePosition('whole')}>\r\n              <MaterialCommunityIcon\r\n                name='checkbox-blank-circle'\r\n                color={state.selected && state.position === 'whole' ? colors.primary : colors.backgroundDark}\r\n                size={24}\r\n              />\r\n            </Circle>\r\n            <Circle onPress={() => handlePosition('right')}>\r\n              <MaterialCommunityIcon\r\n                name='circle-half-full'\r\n                color={state.selected && state.position === 'right' ? colors.primary : colors.backgroundDark}\r\n                size={24}\r\n              />\r\n            </Circle>\r\n          </PositionControl>\r\n        )\r\n      }\r\n      <OText color='#555'>\r\n        + {parsePrice(price)}\r\n      </OText>\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  inverse: {\r\n    transform: [{ rotateY: '180deg' }]\r\n  }\r\n})\r\n\r\nexport const ProductOptionSubOption = (props: any) => {\r\n  const productOptionSubOptionProps = {\r\n    ...props,\r\n    UIComponent: ProductOptionSubOptionUI\r\n  }\r\n\r\n  return (\r\n    <ProductSubOptionController {...productOptionSubOptionProps} />\r\n  )\r\n}\r\n"]}