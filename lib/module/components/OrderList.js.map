{"version":3,"sources":["OrderList.tsx"],"names":["React","styled","getOrderStatus","ODropDown","OSegment","OText","OrderItem","StackActions","Wrapper","View","FilterWrapper","OrdersWrapper","ScrollView","orderStatus","dateFilters","OrderList","props","items","text","image","require","statusFilters","getFilterTypes","useState","curTab","onChangeStatus","online","updateOnline","isOnline","useEffect","onChangeTabs","idx","filterOrders","orders","tab","ary","filter","item","status","filterByGroup","filterByDate","onClickOrder","data","alert","detailStack","push","order","navigation","dispatch","minWidth","map","index"],"mappings":"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","sourcesContent":["\r\nimport * as React from 'react'\r\nimport styled from 'styled-components/native'\r\nimport { getOrderStatus } from '../providers/Utilities';\r\nimport { ODropDown, OSegment, OText } from './shared';\r\n\r\nimport OrderItem from './OrderItem';\r\nimport { StackActions } from '@react-navigation/native';\r\n\r\nconst Wrapper = styled.View`\r\nflex: 1;\r\n    background-color: white;\r\n    padding-horizontal: 12px;\r\n    padding-top: 110px;\r\n    padding-bottom: 20px;\r\n`\r\nconst FilterWrapper = styled.View`\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-vertical: 10px;\r\n    z-index: 10;\r\n`\r\nconst OrdersWrapper = styled.ScrollView`\r\n    \r\n`\r\nconst orderStatus = [\r\n    ['Group', getOrderStatus(0), getOrderStatus(4), getOrderStatus(7)],      // pending\r\n    ['Group', getOrderStatus(3), getOrderStatus(8)],         // inprogress\r\n    ['Group', getOrderStatus(1), getOrderStatus(9), getOrderStatus(11)],     // completed\r\n    ['Group', getOrderStatus(2), getOrderStatus(5), getOrderStatus(6), getOrderStatus(10), getOrderStatus(12)]   // canceled\r\n];\r\n\r\nconst dateFilters = [ 'Today', 'Last Week', 'Older' ];\r\n\r\ninterface Props {\r\n    orders: Array<any>,\r\n    isOnline: boolean,\r\n    navigation: any\r\n}\r\n\r\nconst OrderList = (props: Props) => {\r\n    let items = [\r\n        {\r\n            text: 'Pending',\r\n            image: require('../assets/icons/pending.png')\r\n        },\r\n        {\r\n            text: 'InProgress',\r\n            image: require('../assets/icons/inprogress.png')\r\n        },\r\n        {\r\n            text: 'Completed',\r\n            image: require('../assets/icons/completed.png')\r\n        },\r\n        {\r\n            text: 'Canceled',\r\n            image: require('../assets/icons/canceled.png')\r\n        }\r\n    ];\r\n    \r\n    // Events -----------\r\n\r\n    const [statusFilters, getFilterTypes] = React.useState(orderStatus[0]);\r\n    var [curTab, onChangeStatus] = React.useState(0);\r\n    const [online, updateOnline] = React.useState(props.isOnline);\r\n\r\n    React.useEffect(() => {\r\n        updateOnline(props.isOnline);\r\n    },[props.isOnline]);\r\n\r\n    const onChangeTabs = (idx: number) => {\r\n        // alert(`Selectd Order Status : ${items[idx].text}`);\r\n        onChangeStatus(idx);\r\n        getFilterTypes(orderStatus[idx]);\r\n\r\n    }\r\n    const filterOrders = (orders: Array<any>, tab: number) : Array<any> => {\r\n        var ary = [];\r\n        if (tab == 0) {\r\n            ary = orders.filter(item => item.status == 0 || item.status == 4 || item.status == 7)\r\n        } else if (tab == 1) {\r\n            ary = orders.filter(item => item.status == 3 || item.status == 8)\r\n        } else if (tab == 2) {\r\n            ary = orders.filter(item => item.status == 1 || item.status == 9 || item.status == 11)\r\n        } else if (tab == 3) {\r\n            ary = orders.filter(item => item.status == 2 || item.status == 5 || item.status == 6 || item.status == 10 || item.status == 12)\r\n        }\r\n        return ary\r\n    }\r\n    const filterByGroup = (idx: number) => {\r\n        // alert( `Groupd : ${statusFilters[idx]}`);\r\n    }\r\n    const filterByDate = (idx: number) => {\r\n        // alert( `Date : ${dateFilters[idx]}`);\r\n    }\r\n    const onClickOrder = (data: any) => {\r\n        // alert(data.business.name);\r\n        if (curTab == 0 && !online) {\r\n            alert('You are offline.')\r\n            return;\r\n        }\r\n        let detailStack = StackActions.push('OrderDetail', {order: data, status: curTab});\r\n        props.navigation.dispatch(detailStack);\r\n        // props.navigation.navigate('OrderDetail', {order: data, status: curTab});\r\n\r\n    }\r\n\r\n    return (\r\n        <Wrapper>\r\n            <OSegment \r\n                items={items} \r\n                selectedIdx={curTab} \r\n                onSelectItem={onChangeTabs} \r\n            />\r\n            <FilterWrapper>\r\n                <ODropDown \r\n                    items={statusFilters} \r\n                    placeholder={'Group'} \r\n                    kindImage={require('../assets/icons/group.png')}\r\n                    selectedIndex={0}\r\n                    onSelect={filterByGroup}\r\n                />\r\n                {curTab > 0 ? (<OText style={{ minWidth: 10 }}>{''}</OText>):null}\r\n                {curTab > 0 ? (\r\n                    <ODropDown \r\n                        items={dateFilters} \r\n                        placeholder={'Today'} \r\n                        kindImage={require('../assets/icons/calendar.png')}\r\n                        selectedIndex={0}\r\n                        onSelect={filterByDate}\r\n                    />\r\n                ) : null}\r\n            </FilterWrapper>\r\n            <OrdersWrapper>\r\n                {filterOrders(props.orders, curTab).map((item, index) => (\r\n                    <OrderItem key={index} isOnline={online} data={item} canAccept={curTab == 0 ? true : false} onClick={onClickOrder}></OrderItem>\r\n                ))}\r\n            </OrdersWrapper>\r\n        </Wrapper>\r\n    );\r\n}\r\n\r\nexport default OrderList"]}